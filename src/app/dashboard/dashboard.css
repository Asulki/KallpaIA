/* ===== SOLO DASHBOARD ===== */
.kallpa-dashboard{
  /* Paleta STEM */
  --bg:#0B0F19;
  --glass: rgba(26,30,46,.85);
  --primary:#7C3AED;       /* morado principal */
  --blue:#3B82F6;          /* acento / hover */
  --green:#22C55E;         /* éxito */
  --yellow:#EAB308;        /* lógico / progreso */
  --pink:#EC4899;          /* creativo */
  --text:#F9FAFB;          /* principal */
  --muted:#9CA3AF;         /* secundario */

  /* Superficies / bordes / sombras */
  --glass-2: rgba(255,255,255,.06);
  --border: rgba(255,255,255,.12);
  --shadow: 0 20px 60px rgba(0,0,0,.45), 0 2px 10px rgba(0,0,0,.25);

  /* Tipografía */
  --font: ui-sans-serif, Inter, "Segoe UI", Roboto, system-ui, Arial;

  /* Radii / espaciados */
  --r-sm:10px; --r-md:14px; --r-lg:18px; --r-xl:22px;
  --pad:16px; --gap:16px;

  /* Animaciones */
  --t-fast:120ms; --t-med:180ms; --t-slow:300ms;
  --ease: cubic-bezier(.2,.8,.2,1);

  position:relative; 
  background: var(--bg);
  font-family: var(--font);
  padding: 18px;
  min-height: 100vh;
}

/* ===== TARJETA BASE ===== */
.kallpa-dashboard .kd-card{
  background: var(--glass);
  border:1px solid var(--border);
  border-radius: var(--r-lg);
  box-shadow: var(--shadow);
  padding: clamp(16px, 2vw, 24px);
  color: var(--text);
  transition: transform var(--t-med) var(--ease), box-shadow var(--t-med) var(--ease), border-color var(--t-med);
}
.kallpa-dashboard .kd-card:hover{
  transform: translateY(-4px);
  box-shadow: 0 28px 80px rgba(60,70,120,.45);
  border-color: rgba(124,58,237,.45); /* primary */
}
.kallpa-dashboard .kd-card:focus-within{
  outline: none;
  box-shadow: 0 0 0 3px rgba(59,130,246,.35), var(--shadow); /* focus azul */
}
.kallpa-dashboard .kd-card.is-loading{ position:relative; overflow:hidden }
.kallpa-dashboard .kd-card.is-loading::after{
  content:""; position:absolute; inset:0;
  background: linear-gradient(110deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.06) 30%, rgba(255,255,255,0) 60%);
  animation: kd-shimmer 1.6s linear infinite;
}
@keyframes kd-shimmer{ to{ transform: translateX(100%) } }

.kallpa-dashboard .kd-card__header{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px }
.kallpa-dashboard .kd-card__header h3{ margin:0; font-weight:800; letter-spacing:.2px }
.kallpa-dashboard .kd-card__footer{ margin-top:12px; display:flex; gap:10px; flex-wrap:wrap }


/* ===== MICRO-ANIMACIONES & COMPONENTES ===== */

/* Botón Primario */
.kallpa-dashboard .btn-primary{
  --bg1: var(--primary);
  --bg2: #9A6BFF;
  height:44px; padding:0 16px; border:none; cursor:pointer;
  border-radius: var(--r-md); font-weight:700; color:#0B0F19;
  background: linear-gradient(135deg, var(--bg1), var(--bg2));
  box-shadow: 0 10px 28px rgba(124,58,237,.45);
  transition: transform var(--t-fast) var(--ease), box-shadow var(--t-med), filter var(--t-fast);
}
.kallpa-dashboard .btn-primary:hover{
  transform: scale(1.02);
  box-shadow: 0 14px 40px rgba(124,58,237,.55);
  filter: brightness(1.05);
}
.kallpa-dashboard .btn-primary:focus-visible{ outline:2px solid var(--blue); outline-offset:3px }

.kallpa-dashboard .btn-primary.small, 
.kallpa-dashboard .btn-secondary.small,
.kallpa-dashboard .ghost.small {
    height: 36px;
    font-size: 14px;
    padding: 0 12px;
}

/* Botón Fantasma */
.kallpa-dashboard .ghost {
    background: transparent;
    border: 1px solid var(--border);
    color: var(--text);
    padding: 6px 10px;
    border-radius: var(--r-sm);
    cursor: pointer;
    transition: background var(--t-med), color var(--t-med);
}
.kallpa-dashboard .ghost:hover {
    background: rgba(255,255,255,0.1);
}


/* Chips / Pills */
.kallpa-dashboard .pill{
  display:inline-flex; align-items:center; gap:8px;
  padding:8px 12px; border-radius:999px;
  border:1px solid var(--border); color:var(--text); background: rgba(255,255,255,.03);
  transition: background var(--t-med), transform var(--t-fast);
}
.kallpa-dashboard .pill:hover{ background: rgba(236,72,153,.12); transform: translateY(-1px) }
.kallpa-dashboard .pill:hover::after{
  content:""; position:absolute; inset:-2px; border-radius:inherit;
  box-shadow: 0 0 16px rgba(236,72,153,.45);
  animation: kd-pulse 1.4s ease-out infinite;
}
@keyframes kd-pulse{ 0%{opacity:.8} 100%{opacity:0; transform: scale(1.08)} }

/* Barra de Progreso */
.kallpa-dashboard .progress{
  height:10px; border-radius:999px; background: rgba(255,255,255,.08); overflow:hidden; position:relative;
  border:1px solid var(--border);
}
.kallpa-dashboard .progress__fill{
  height:100%; background: linear-gradient(90deg, var(--green), var(--yellow));
  width:65%; /* controla con inline style */
  position:relative;
}
.kallpa-dashboard .progress__fill::after{
  content:""; position:absolute; inset:0;
  background: linear-gradient(120deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.25) 30%, rgba(255,255,255,0) 60%);
  animation: kd-shimmer 2.8s linear infinite;
}
.kallpa-dashboard .progress__spark{
  position:absolute; top:-6px; width:6px; height:6px; border-radius:50%;
  background:#fff; filter: drop-shadow(0 0 6px #fff);
  animation: kd-spark 3.4s ease-in-out infinite;
}
@keyframes kd-spark{ 0%{left:0} 50%{left:50%} 100%{left:100%} }


/* KPI Card */
.kallpa-dashboard .kpi{
  background: var(--glass);
  border:1px solid var(--border); border-radius: var(--r-lg);
  padding:16px; transition: border-color var(--t-med), transform var(--t-med);
}
.kallpa-dashboard .kpi:hover{
  transform: translateY(-3px);
  border-image: linear-gradient(90deg, var(--primary), var(--blue)) 1;
}
.kallpa-dashboard .kpi h4 { margin: 0 0 6px; color: var(--muted); font-weight: 600; font-size: 14px; }
.kallpa-dashboard .kpi .val { font-size: 28px; font-weight: 800; color: var(--text); }
.kallpa-dashboard .kpi .trend { font-size: 12px; color: var(--muted); }
.kallpa-dashboard .kpi .trend.up { color: var(--green); }
.kallpa-dashboard .kpi .trend.ok { color: var(--blue); }

/* Tooltips & Toasts */
.kallpa-dashboard .fade-in{
  animation: kd-fade .18s var(--ease) both;
}
@keyframes kd-fade{ from{opacity:0; transform:translateY(4px)} to{opacity:1; transform:translateY(0)} }


/* ===== FONDO ANIMADO ===== */
.kallpa-dashboard .kd-space{
  position:fixed; inset:0; pointer-events:none; z-index:0;
  background:
    radial-gradient(1000px 700px at 20% 15%, rgba(124,58,237,.18), transparent 60%),
    radial-gradient(900px 600px at 80% 70%, rgba(59,130,246,.12), transparent 60%);
}
.kallpa-dashboard .kd-space::before,
.kallpa-dashboard .kd-space::after{
  content:""; position:absolute; inset:0; background-repeat:repeat; animation: kd-parallax 40s linear infinite;
}
.kallpa-dashboard .kd-space::before{
  background-image:
    radial-gradient(1px 1px at 10px 20px, #fff 50%, transparent 51%),
    radial-gradient(1px 1px at 30px 80px, #fff 50%, transparent 51%),
    radial-gradient(1px 1px at 130px 150px, #fff 50%, transparent 51%);
  opacity:.6;
}
.kallpa-dashboard .kd-space::after{
  background-image:
    radial-gradient(2px 2px at 60px 40px, #fff 60%, transparent 61%),
    radial-gradient(2px 2px at 160px 220px, #fff 60%, transparent 61%);
  animation: kd-parallax 80s linear infinite, kd-twinkle 3s ease-in-out infinite;
  opacity:.7;
}
@keyframes kd-parallax{ to{ background-position: 1000px 600px } }
@keyframes kd-twinkle{ 0%,100%{opacity:.35} 50%{opacity:.9} }

.kallpa-dashboard .kd-constellations{
  position:absolute; inset:0; width:100%; height:100%;
  animation: kd-slow-float 30s ease-in-out infinite alternate;
}
@keyframes kd-slow-float{ from{ transform: translateY(-1%) } to{ transform: translateY(1%) } }

/* ===== LAYOUT ===== */
.kallpa-dashboard > *:not(.kd-space){ position:relative; z-index:1 }

.kallpa-dashboard .kd-header{
  display:grid; grid-template-columns: 220px 1fr auto; gap:16px; align-items:center; margin-bottom:16px;
  color: var(--text);
}
.kallpa-dashboard .kd-logo{display:flex;align-items:center;gap:10px;font-weight:800;color:var(--text)}
.kallpa-dashboard .kd-logo .badge{
  width:32px;height:32px;border-radius:10px;display:grid;place-items:center;
  background:linear-gradient(135deg,var(--primary),var(--blue));
  box-shadow:0 6px 18px rgba(59,130,246,.35), inset 0 0 18px rgba(255,255,255,.15);
}
.kallpa-dashboard .kd-search{display:flex;gap:8px}
.kallpa-dashboard .kd-search input{
  width:100%;height:44px;border-radius:12px;border:1px solid var(--border);
  background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.02));
  color:var(--text); padding:0 12px; outline:none;
}
.kallpa-dashboard .kd-search input:focus{
  box-shadow:0 0 0 3px rgba(124,58,237,.25);
  border-color:color-mix(in oklab, var(--primary) 70%, white 30%);
}
.kallpa-dashboard .kd-search button{
  height:44px;padding:0 12px;border-radius:12px;border:1px solid var(--border);
  background:var(--glass); color:var(--text); cursor:pointer;
}
.kallpa-dashboard .kd-actions{display:flex;align-items:center;gap:10px}
.kallpa-dashboard .icon-btn{
  height:40px;width:40px;border-radius:12px;border:1px solid var(--border);
  background:var(--glass); color:var(--text); cursor:pointer;
}
.kallpa-dashboard .kd-user{display:flex;align-items:center;gap:8px}
.kallpa-dashboard .kd-user img{width:32px;height:32px;border-radius:50%}

.kallpa-dashboard .kd-layout{
  display:grid; grid-template-columns: 240px 1fr; gap: var(--gap);
}
.kallpa-dashboard .kd-sidebar{
  background: var(--glass);
  border:1px solid var(--border); border-radius: var(--r-lg); padding:12px;
  height: fit-content;
}
.kallpa-dashboard .kd-sidebar a{
  display:flex; align-items:center; gap:10px;
  color:var(--muted); text-decoration:none; padding:10px 12px; border-radius:var(--r-md);
  transition: background var(--t-med), color var(--t-med), box-shadow var(--t-med);
}
.kallpa-dashboard .kd-sidebar a:hover {
    background: var(--glass-2);
    color: var(--text);
}
.kallpa-dashboard .kd-sidebar a.active{
  color:#0B0F19;
  background: linear-gradient(135deg, var(--primary), #9A6BFF);
  box-shadow: 0 10px 26px rgba(124,58,237,.35);
}
.kallpa-dashboard .kd-main{ display:grid; gap: var(--gap); align-content: start; }
.kallpa-dashboard .kd-kpis{ display:grid; grid-template-columns: repeat(4,1fr); gap: var(--gap) }
.kallpa-dashboard .kd-charts{ display:grid; grid-template-columns: 1.3fr 1fr; gap: var(--gap) }

.kallpa-dashboard .chart-placeholder{
  height:220px; border-radius:var(--r-md); border:1px dashed var(--border);
  display:grid; place-items:center; color:var(--muted);
}

.kallpa-dashboard .kd-grid-3{
  display:grid; grid-template-columns: repeat(3, 1fr); gap: var(--gap);
}
.kallpa-dashboard .list ul{list-style:none;margin:0;padding:0;display:grid;gap:10px; font-size: 14px;}
.kallpa-dashboard .activity .dot{
  display:inline-block;width:8px;height:8px;border-radius:50%;
  background:var(--blue);margin-right:8px;
}
.kallpa-dashboard .tasks li{
  display:flex;align-items:center;gap:8px;
}
.kallpa-dashboard .tasks input[type="checkbox"] {
    accent-color: var(--primary);
}
.kallpa-dashboard .tasks label {
    flex-grow: 1;
}
.kallpa-dashboard .tasks small{color:var(--muted)}

.kallpa-dashboard .mentor .mentor-msg { font-size: 14px; }
.kallpa-dashboard .mentor .mentor-actions{display:flex;gap:8px;margin-top:10px}

.kallpa-dashboard .kd-resources{
  display:grid; grid-template-columns: repeat(3, 1fr); gap: var(--gap);
}
.kallpa-dashboard .res-card{
  background: var(--glass);
  border:1px solid var(--border); border-radius: var(--r-lg); padding:16px;
  display:grid; align-content:flex-start; gap:8px;
}
.res-card h4 { margin: 0; font-weight: 700; }
.res-card p { margin: 0; font-size: 14px; color: var(--muted); }
.res-card .btn-secondary { width: fit-content; margin-top: auto; }

.kallpa-dashboard .btn-secondary{
  height:44px;border:none;border-radius:var(--r-md);cursor:pointer;color:#06131A;
  background:linear-gradient(135deg,var(--blue), color-mix(in oklab, var(--blue) 70%, white 25%));
  box-shadow:0 8px 22px rgba(59,130,246,.38);
  font-weight: 700;
  padding: 0 16px;
  transition: transform var(--t-fast) ease, box-shadow var(--t-med);
}
.kallpa-dashboard .btn-secondary:hover {
    transform: scale(1.02);
}

.kallpa-dashboard .kd-footer{display:flex;justify-content:center;color:var(--muted);padding:16px 0 0;}

@media (max-width: 1200px) {
    .kallpa-dashboard .kd-grid-3 { grid-template-columns: 1fr; }
    .kallpa-dashboard .kd-resources { grid-template-columns: 1fr; }
}

@media (max-width: 1024px){
  .kallpa-dashboard .kd-layout{ grid-template-columns: 80px 1fr }
  .kallpa-dashboard .kd-sidebar nav a { font-size: 0; justify-content: center; }
  .kallpa-dashboard .kd-sidebar .active { color: #fff; }
  .kallpa-dashboard .kd-kpis{ grid-template-columns: repeat(2,1fr) }
  .kallpa-dashboard .kd-charts{ grid-template-columns: 1fr }
}
@media (max-width: 768px){
  .kallpa-dashboard { padding: 12px; }
  .kallpa-dashboard .kd-header{ grid-template-columns: 1fr; justify-items: center; }
  .kallpa-dashboard .kd-search { width: 100%; max-width: 400px; }
  .kallpa-dashboard .kd-layout{ grid-template-columns: 1fr; }
  .kallpa-dashboard .kd-sidebar { display: none; } /* O convertir a menú hamburguesa */
}
@media (max-width: 520px){
    .kallpa-dashboard .kd-kpis{ grid-template-columns: 1fr }
}

@media (prefers-reduced-motion: reduce){
  .kallpa-dashboard *{ animation: none !important; transition: none !important }
}
